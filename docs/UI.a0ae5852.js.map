{"version":3,"sources":["scripts/UI.js"],"names":["double_slider_current","start_x","start_margin","double_slider__calc","double_slider_container","result","container","left","querySelector","middle","right","container_rect","getBoundingClientRect","left_rect","middle_rect","right_rect","result_left","parseInt","style","marginLeft","isNaN","result_length","result_middle","width","double_slider__onmousedown","element","document","elementFromPoint","clientX","clientY","className","indexOf","parentElement","addEventListener","double_slider__onmousemove","double_slider__onmouseup","removeEventListener","context","offset","ret","new_middle","new_margin_left","max_middle_width","new_middle_width","parseFloat","maximum","minimum","attributes","current_min","value","current_max","onchange","window","arr","querySelectorAll","i","len","length"],"mappings":"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","file":"UI.a0ae5852.js","sourceRoot":"..","sourcesContent":["var double_slider_current = null;\r\nvar start_x = 0;\r\nvar start_margin = 0;\r\n\r\nfunction double_slider__calc(double_slider_container) {\r\n  var result = {};\r\n  result.container = double_slider_container;\r\n  result.left = result.container.querySelector(\".double_slider__left\");\r\n  result.middle = result.container.querySelector(\".double_slider__middle\");\r\n  result.right = result.container.querySelector(\".double_slider__right\");\r\n\r\n  result.container_rect = result.container.getBoundingClientRect();\r\n  result.left_rect = result.left.getBoundingClientRect();\r\n  result.middle_rect = result.middle.getBoundingClientRect();\r\n  result.right_rect = result.right.getBoundingClientRect();\r\n\r\n  result.result_left = parseInt(result.left.style.marginLeft);\r\n  if(isNaN(result.result_left))\r\n    result.result_left = 0;\r\n    result.result_length = result.container_rect.right - result.container_rect.left - result.left_rect.right + result.left_rect.left - result.right_rect.right + result.right_rect.left - 2;\r\n  result.result_middle = parseInt(result.middle.style.width);\r\n  if(isNaN(result.result_middle))\r\n    result.result_middle = 0;\r\n  return result;\r\n}\r\n\r\nfunction double_slider__onmousedown (element) {\r\n  double_slider_current = document.elementFromPoint(element.clientX, element.clientY);\r\n  if(double_slider_current == null)\r\n    return;\r\n  start_x = element.clientX;\r\n  if(double_slider_current.className.indexOf(\"double_slider__left\") >= 0) {\r\n    start_margin = parseInt(double_slider_current.style.marginLeft);\r\n  } else {\r\n    if(double_slider_current.className.indexOf(\"double_slider__right\") >= 0) {\r\n      start_margin = parseInt(double_slider_current.parentElement.querySelector(\".double_slider__middle\").style.width);\r\n    } else {\r\n      double_slider_current = null;\r\n      return;\r\n    }\r\n  }\r\n  if(isNaN(start_margin)) {\r\n    start_margin = 0;\r\n  }\r\n  document.addEventListener('mousemove', double_slider__onmousemove );\r\n  document.addEventListener('mouseup', double_slider__onmouseup );\r\n}\r\n\r\nfunction double_slider__onmouseup (element) {\r\n  double_slider_current = null;\r\n  document.removeEventListener('mousemove', double_slider__onmousemove );\r\n  document.removeEventListener('mouseup', double_slider__onmouseup );\r\n}\r\n\r\nfunction double_slider__onmousemove (element) {\r\n  if(double_slider_current === null) {\r\n    document.removeEventListener('mousemove', double_slider__onmousemove );\r\n    document.removeEventListener('mouseup', double_slider__onmouseup );\r\n    return;\r\n  }\r\n\r\n  var context = double_slider__calc(double_slider_current.parentElement);\r\n  var offset = element.clientX - start_x;\r\n\r\n  if(double_slider_current.className.indexOf(\"double_slider__left\")>=0) {\r\n    var ret = start_margin - context.result_left;\r\n    var new_middle = context.result_middle - ret - offset;\r\n    var new_margin_left = start_margin + offset;\r\n\r\n    if(new_middle < 0) {\r\n      new_margin_left += new_middle;\r\n      new_middle = 0;\r\n    }\r\n\r\n    if(new_margin_left < 0) {\r\n      new_middle += new_margin_left;\r\n      new_margin_left = 0;\r\n    }\r\n    context.left.style.marginLeft = new_margin_left + \"px\";\r\n    context.middle.style.width = new_middle + \"px\";\r\n  } else {\r\n    var max_middle_width = context.result_length - context.result_left;\r\n    var new_middle_width = start_margin + offset;\r\n    if(new_middle_width > max_middle_width)\r\n      context.middle.style.width = max_middle_width + \"px\";\r\n    else\r\n      context.middle.style.width = new_middle_width + \"px\";\r\n  }\r\n  var left = parseInt(context.left.style.marginLeft);\r\n  var middle = parseInt(context.middle.style.width) + left;\r\n\r\n  left = (parseFloat(left) / parseFloat(context.result_length)) * (parseFloat(context.container.maximum)-parseFloat(context.container.minimum)) + parseFloat(context.container.minimum);\r\n  middle = (parseFloat(middle) / parseFloat(context.result_length)) * (parseFloat(context.container.maximum)-parseFloat(context.container.minimum)) + parseFloat(context.container.minimum);\r\n  context.container.attributes.current_min.value = context.container.current_min = left;\r\n  context.container.attributes.current_max.value = context.container.current_max = middle;\r\n\r\n  context.container.onchange(context.container);\r\n}\r\n\r\nwindow.addEventListener('load', function () {\r\n    arr = document.querySelectorAll('.double_slider__container');\r\n    for (var i = 0, len = arr.length; i < len; i++) {\r\n      var context = double_slider__calc(arr[i]);\r\n\r\n      context.container.current_min = context.container.attributes.current_min.value;\r\n      context.container.minimum = context.container.attributes.minimum.value;\r\n      context.container.maximum = context.container.attributes.maximum.value;\r\n      context.container.current_max = context.container.attributes.current_max.value;\r\n\r\n      var new_margin_left = parseInt(context.result_length * (parseFloat(context.container.current_min) - parseFloat(context.container.minimum)) / (parseFloat(context.container.maximum) - parseFloat(context.container.minimum)));\r\n      var new_middle_width = parseInt(context.result_length * (parseFloat(context.container.current_max) - parseFloat(context.container.minimum)) / (parseFloat(context.container.maximum) - parseFloat(context.container.minimum)));\r\n      new_middle_width -= new_margin_left;\r\n\r\n      new_middle_width -= new_margin_left;\r\n      if(new_margin_left > context.result_length) {\r\n        new_margin_left = context.result_length;\r\n        new_middle_width = 0;\r\n      }\r\n      if(new_middle_width < 0)\r\n        new_middle_width = 0;\r\n\r\n      if( (new_middle_width + new_margin_left) > context.result_length)\r\n        new_middle_width = context.result_length - new_margin_left;\r\n\r\n        context.left.style.marginLeft = new_margin_left + \"px\";\r\n        context.middle.style.width = new_middle_width + \"px\";\r\n\r\n        new_margin_left = (parseFloat(new_margin_left) / parseFloat(context.result_length)) * (parseFloat(context.container.maximum)-parseFloat(context.container.minimum)) + parseFloat(context.container.minimum);\r\n        new_middle_width = (parseFloat(new_middle_width) / parseFloat(context.result_length)) * (parseFloat(context.container.maximum)-parseFloat(context.container.minimum)) + parseFloat(context.container.minimum);\r\n        context.container.attributes.current_min.value = context.container.current_min = new_margin_left;\r\n        context.container.attributes.current_max.value = context.container.current_max = new_middle_width;\r\n      \r\n        context.container.onchange(context.container);\r\n\r\n        arr[i].addEventListener('mousedown', double_slider__onmousedown );\r\n        arr[i].addEventListener('ondragstart', function() {\r\n        return false;\r\n      });\r\n    }    \r\n  }\r\n);"]}